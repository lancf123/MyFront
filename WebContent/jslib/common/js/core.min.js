var _url=new function(){this.getHashParams=function(){var d=null,a=window.location.hash;_util.isEmpty(a)||0!==a.indexOf("#")||(a=a.substring(1),d=a.split("/"));return d};this.getPageId=function(){var d="",a=this.getHashParams();0<a.length&&(d=a[0]);return d};this.setUrlParameter=function(d,a){var e=d,b="",f;_util.isEmpty(d)||(f=d.indexOf("#"),-1!==f&&(b=d.substring(f),e=d.substring(0,f)),d=-1!==e.indexOf("?")?"&":"?",e+=d+$.param(a),_util.isEmpty(b)||(e+=b));return e};this.getUrlParameter=function(d){for(var a=
{},e=window.location.search.substring(1).split("&"),b,f=0;f<e.length;f++)if(b=e[f].split("="),_util.isEmpty(d))a[b[0]]=b[1];else if(b[0]===d){a=b[1];break}return a};this.redirectTo=function(d,a){a?window.location.replace(d):window.location.href=d};this.redirectToErrorPage=function(d){this.redirectTo(_config.HTML_ROOT_DIR+_config.HTML_ERROR_DIR+d+".html",!0)};this.clearUrlParameter=function(){var d=window.location.href,d=d.replace(window.location.search,"");window.history.replaceState(null,null,d)}},
_globalParam=new function(){function d(){var b=e.getItem("___global_param__")||"{}";return JSON.parse(b)}function a(b){e.setItem("___global_param__",JSON.stringify(b))}var e=window.localStorage;this.set=function(b,f){var e=d();e[b]=f?f:"";a(e)};this.get=function(b){return d()[b]};this.clear=function(b){if(_util.isEmpty(b))e.removeItem("___global_param__");else{var f=d();delete f[b];a(f)}}},_html=new function(){var d=function(b){b=0===b.indexOf("#")?b:"#"+b;return $(b)},a=function(b,a,e,g){$(d(_config.MAIN_AREA_ID)).off(b,
a);$(d(_config.MAIN_AREA_ID)).on(b,a,g,function(b){_action.doAction(e,b)})},e=function(b){var a={};b=d(b).serializeArray();$.each(b,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});return a};this.getValue=function(b){var a=null;_util.isEmpty(b)||(a="FORM"===d(b).prop("tagName")?e(b):_util.escape(d(b).val()));return a};this.setValue=function(b,a){d(b).val(a)};this.byId=function(b){b=d(b);return 0<b.length?b[0]:
null};this.validate=function(b,a){return!0};this.show=function(b){d(b).show()};this.hide=function(b){d(b).hide()};this.enable=function(b){d(b).prop("disabled",!1)};this.disable=function(b){d(b).prop("disabled",!0)};this.removeDomNodeById=function(b){d(b).remove()};this.removeDomNode=function(b){var a=b.getAttribute("id");_util.isEmpty(a)?$(b).remove():d(a).remove()};this.bindEventById=function(b,d,e){_util.isEmpty(b)||(b=0===b.indexOf("#")?b:"#"+b,a(d,b,e))};this.bindEventByName=function(b,d,e){_util.isEmpty(b)||
a(d,"[name='"+b+"']",e)}},_util=new function(){function d(c){return r[c]}function a(c){return!!c&&"object"===typeof c}function e(c){return"number"==typeof c&&-1<c&&0===c%1&&9007199254740991>=c}function b(c){if(h(c))return c;var b=[];(null===c?"":c+"").replace(t,function(c,a,d,e){b.push(d?e.replace(u,"$1"):a||c)});return b}function f(c){return"string"==typeof c||a(c)&&"[object String]"==Object.prototype.toString.call(c)}function h(c){return a(c)&&e(c.length)&&"[object Array]"==Object.prototype.toString.call(c)}
function g(c){var b=typeof c;return!!c&&("object"==b||"function"==b)}function k(c){return g(c)&&"[object Function]"==Object.prototype.toString.call(c)}function l(c){return a(c)&&null!==c&&e(m(c))&&n.call(c,"callee")&&!v.call(c,"callee")}function p(c){return g(c)?Object.keys(c):[]}var t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,u=/\\(\\)?/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},q=/[&<>"'`]/g,w=RegExp(q.source),n=Object.prototype.hasOwnProperty,
v=Object.prototype.propertyIsEnumerable,m=function(c){return function(b){return null===b?void 0:b[c]}}("length");this.isEmpty=function(c){return null===c||void 0===c?!0:null!==c&&e(m(c))&&(h(c)||f(c)||l(c)||a(c)&&k(c.splice))?!c.length:!p(c).length};this.isString=f;this.isNumber=function(c){return"number"==typeof c||a(c)&&"[object Number]"==Object.prototype.toString.call(c)};this.isBoolean=function(c){return!0===c||!1===c||a(c)&&"[object Boolean]"==Object.prototype.toString.call(c)};this.isArray=
h;this.isObject=g;this.isFunction=k;this.isArguments=l;this.has=function(c,b){return n.call(c,b)};this.get=function(c,a,d){if(null===c)c=void 0;else{var e=b(a);a+="";if(null===c||void 0===c)c=void 0;else{var f;if(f=void 0!==a)f=c,f=g(f)?f:Object(f),f=a in f;f&&(e=[a]);a=0;for(f=e.length;null!==c&&a<f;)c=c[e[a++]];c=a&&a==f?c:void 0}}return void 0===c?d:c};this.keys=p;this.dateFormat=function(c,a){var b={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),
"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in b)(new RegExp("("+d+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[d]:("00"+b[d]).substr((""+b[d]).length)));return a};this.escape=function(a){return(a=null===a?"":a+"")&&w.test(a)?a.replace(q,d):a};this.getFileContent=function(a,b){var c=null,d=new HTTPContext;d.url=a+"?_="+_config.createCacheToken();d.method="GET";d.dataType=
b?b:"text";d.success=function(a){c=a};_http.doSync(d);return c}},_http=new function(){var d=function(d){if(!_util.isEmpty(d))return d.timeout=_util.get(d,"timeout",_config.DEFAULT_TIMEOUT),_util.isFunction(d.error)?d.error=d.error:d.error=a,$.ajax(d)},a=function(a,b,d){"timeout"===b?_ui.alert("OK","Network connection timed out."):_ui.alert("OK","Network communication exception.")};this.doAsync=function(a){_util.isEmpty(a)||(a.async=!0,d(a))};this.doSync=function(a){_util.isEmpty(a)||(a.async=!1,d(a))}},
_ui=new function(){var d=function(a){a=0===a.indexOf("#")?a:"#"+a;return $(a)};this.alert=function(a,d,b){bootbox.alert({buttons:{ok:{label:a}},message:"<div style='text-align:center'>"+d+"</div>",callback:b})};this.showDialog=function(a,d,b,f,h,g,k){bootbox.dialog({message:"<div style='text-align:center'>"+h+"</div>",title:"",animate:!0,buttons:{danger:{label:d,className:"btn-default",callback:k},success:{label:a,className:"btn-primary",callback:g}}})};this.forwardTo=function(a){_viewModelController.forwardTo.apply(_viewModelController,
arguments)};this.backTo=function(a){_viewModelController.backTo.apply(_viewModelController,arguments)};this.updateHTML=function(a,d){_util.isEmpty(a)||(a=_util.getFileContent(a,"html"),$("#"+_config.MAIN_AREA_ID).html(a));d()};this.updateDocumentTitle=function(a){a=_util.isEmpty(a)?"":a;document.title=a};this.disable=function(a){$(d(a)).addClass("disabled")};this.enable=function(a){$(d(a)).removeClass("disabled")}},HTTPContext=function(d,a,e,b,f,h,g,k,l){this.url=d;this.method=a;this.dataType=e;this.contentType=
b;this.data=f;this.success=h;this.error=g;this.complete=k;this.beforeSend=l};